<div uk-sticky>
  <nav class="uk-navbar-container" style="height:50pt" uk-navbar>
    <div class="uk-navbar-left uk-margin-left">
    </div>
    <div class="uk-navbar-center">
      {{ "car" | translate }} {{ "management" | translate }}
    </div>
    <div class="uk-navbar-right uk-margin-right">
        <span uk-icon="icon: plus-circle; ratio: 1" (click)="registerCar()"></span>
    </div>
  </nav>
</div>

<div class="uk-margin-xlarge-bottom" >
    <ul class="uk-list uk-list-divider" style="background-color: white;" *ngIf="!loading">
      <li class="uk-padding-small uk-margin-remove"  *ngFor="let car of cars" >
        <div uk-grid>
            <div class="uk-width-3-4">
              <p class="uk-margin-small">{{ car.license_plate }}</p>
              <p class="uk-text-meta uk-margin-remove">{{car.beacon.name}}</p>
            </div>
            <div class="uk-width-1-4 uk-inline">
                <p class="uk-text-meta uk-margin-small uk-position-center-right">
                    <a (click)="editCar(car.id)" class="uk-margin-right"><span  uk-icon="icon: file-edit"></span> </a>
                    <a  (click)="deregisterCar(car.id, car.license_plate, car.beacon.name)"><span uk-icon="icon: trash"></span> </a>  
                 </p>
            </div>
          </div>
    </li>
    <li class="uk-padding-small uk-margin-remove" uk-grid *ngIf="pageController.pageNumber > 1">

      <div class="uk-width-1-3 uk-padding-remove">
        <button class="uk-button" *ngIf="pageController.pageIndex != 1" (click)="changePageonClick(false, -1)">
            <span uk-pagination-previous></span>
          </button>
      </div>
      <div class="uk-width-1-3 uk-padding-remove uk-text-center" style="line-height:38px;">
          <span class="uk-text-primary">{{pageController.pageIndex}}</span>/{{pageController.pageNumber}}
      </div>
      <div class="uk-width-1-3 uk-padding-remove uk-text-right">
        <button class="uk-button" *ngIf="pageController.pageIndex != pageController.pageNumber" (click)="changePageonClick(false, 1)">
            <span uk-pagination-next></span>
          </button>
      </div>

    </li>
  </ul>
</div>

<app-footer></app-footer>
<!-- <fieldset class="uk-fieldset uk-background-muted uk-padding-small uk-margin">
		<ul uk-accordion>
	    <li *ngFor="let car of cars">
        <a class="uk-accordion-title" href="#">{{car.license_plate}}</a>
        <div class="uk-accordion-content">
            <p>{{'beacon'|translate}} {{'name'|translate}}: {{car.beacon.name}}</p>
						<button class="uk-button uk-button-default uk-button-small uk-border-rounded" (click)="editCar(car.id)">{{'edit'|translate}}</button>
						<button class="uk-button uk-button-danger uk-button-small uk-border-rounded uk-margin-left" (click)="deregisterCar(car.id, car.license_plate, car.beacon.name)">{{'deregister'|translate}}</button>
				</div>
				<hr>
    </li>
	</ul>
</fieldset> -->

<!-- <div class="uk-card uk-card-default uk-margin" style="border:1px solid #ddd;"  *ngFor="let car of cars">
    <div class="uk-card-header uk-background-muted">
		<div class="uk-width-expand">
			<h3 class="uk-card-title uk-margin-remove-bottom">{{car.license_plate}}</h3>
			<p>{{'brand'|translate}}: {{car.brand}}</p>
			<p>{{'model'|translate}}: {{car.model}}</p>
			<p>{{'color'|translate}}: {{car.color}}</p>
			<p>{{'beacon'|translate}} {{'name'|translate}}: {{car.beacon.name}}</p>
			<p *ngIf="car.timeline && car.timeline[0].station_id != '0'">{{'station'|translate}}: {{car.timeline[0].station.name}}</p>
			<p *ngIf="!car.timeline || (car.timeline && car.timeline[0].station_id == '0')">{{'station'|translate}}: -</p>
			<p>{{'status'|translate}}: -</p>
			<p class="uk-text-meta uk-margin-remove-top">
			  <ng-container *ngFor="let noti of car.notification">
				<p *ngIf="noti.dealer_notification_config_id != 0">
				  {{noti.dealer_notification.name}}
				</p>
				<p *ngIf="noti.station_notification_config_id != 0"> 
				  {{noti.station_notification.name}}
				</p>
			  </ng-container>
			</p>
		</div>
    </div>
    <div class="uk-card-footer">
          <button class="uk-button uk-button-default uk-button-small uk-border-rounded" (click)="editCar(car.id)">{{'edit'|translate}}</button>
          <button class="uk-button uk-button-danger uk-button-small uk-border-rounded uk-margin-left" (click)="deregisterCar(car.id, car.license_plate, car.beacon.name)">{{'deregister'|translate}}</button>
		</div>
  </div>  -->

<app-confirm-modal
  [elementId]="confirmModal.elementId"
  [detail]="confirmModal.detail"
  (onClick)="onClickConfirmModal($event)"
></app-confirm-modal>

 
<div id="modal-deregister" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <h2 class="uk-modal-title">
          {{'Are you confirm to'|translate}} {{'deregister car'|translate}}: {{modalDeregister.title}} {{'?'}}
     </h2>
   
    <p class="uk-text-right">
      <button class="uk-button uk-button-primary uk-border-rounded uk-margin-small-left" type="button" (click)="deregister()">{{'deregister'|translate}}</button>
      <button class="uk-button uk-button-default uk-border-rounded uk-margin-small-left" type="button" (click)="cancelDeregister()">{{'cancel'|translate}}</button>
    </p>
  </div>
</div>

<div class="loading" *ngIf="loading">
  <span class="uk-margin-small-right" uk-spinner="ratio: 3"></span>
</div>
 