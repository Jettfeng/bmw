
<div *ngIf="role.service_agent" >
  切片car-list页面代码
<app-footer></app-footer>
</div>

<app-header [backPath]="true" (onClickButton)="onHeaderClick($event)"></app-header>
<div class="uk-container">
  <nav class="uk-navbar-container uk-margin" uk-navbar>
    <div class="uk-navbar-left">
      <a class="uk-navbar-item uk-logo" >{{'car'|translate}} {{'management'|translate}}</a>
    </div>
    <div class="uk-navbar-right">
    </div>
  </nav>
  <fieldset class="uk-fieldset uk-background-muted uk-padding-small">
	<!-- <div class="uk-margin">
        <input class="uk-input" type="text" placeholder="*{{'license plate'|translate}}" [(ngModel)]="car.license_plate">
	</div>

	<div class="uk-margin">
		<input class="uk-input" type="text" placeholder="*{{'name'|translate}}" [(ngModel)]="car.name">
	</div>
	<div class="uk-margin">
		<input class="uk-input" type="text" placeholder="*{{'id'|translate}}" [(ngModel)]="car.id">
	</div>
 

	<div class="uk-margin">
 
				<select class="uk-select" [(ngModel)]="car.beacon_name">
					<option *ngFor="let beacon of beacons" value="{{beacon.name}}">{{beacon.name}}</option>
				</select>
	</div> -->
	<div class="uk-margin">
        <button class="uk-button uk-button-small uk-button-primary uk-border-rounded" (click)="registerCar()">{{'register'|translate}} {{'car'|translate}}</button>
	</div>
	</fieldset>

  <fieldset class="uk-fieldset uk-background-muted uk-padding-small uk-margin">
		<ul uk-accordion>
	    <li *ngFor="let car of cars">
        <a class="uk-accordion-title" href="#">{{car.license_plate}}</a>
        <div class="uk-accordion-content">
            <p>{{'beacon'|translate}} {{'name'|translate}}: {{car.beacon.name}}</p>
						<button class="uk-button uk-button-default uk-button-small uk-border-rounded" (click)="editCar(car.id)">{{'edit'|translate}}</button>
						<button class="uk-button uk-button-danger uk-button-small uk-border-rounded uk-margin-left" (click)="deregisterCar(car.id, car.license_plate, car.beacon.name)">{{'deregister'|translate}}</button>
				</div>
				<hr>
    </li>
	</ul>
</fieldset>

			<!--
  <div class="uk-card uk-card-default uk-margin" style="border:1px solid #ddd;"  *ngFor="let car of cars">
    <div class="uk-card-header uk-background-muted">
		<div class="uk-width-expand">
			<h3 class="uk-card-title uk-margin-remove-bottom">{{car.license_plate}}</h3>
			<p>{{'brand'|translate}}: {{car.brand}}</p>
			<p>{{'model'|translate}}: {{car.model}}</p>
			<p>{{'color'|translate}}: {{car.color}}</p>
			<p>{{'beacon'|translate}} {{'name'|translate}}: {{car.beacon.name}}</p>
			<p *ngIf="car.timeline && car.timeline[0].station_id != '0'">{{'station'|translate}}: {{car.timeline[0].station.name}}</p>
			<p *ngIf="!car.timeline || (car.timeline && car.timeline[0].station_id == '0')">{{'station'|translate}}: -</p>
			<p>{{'status'|translate}}: -</p>
			<p class="uk-text-meta uk-margin-remove-top">
			  <ng-container *ngFor="let noti of car.notification">
				<p *ngIf="noti.dealer_notification_config_id != 0">
				  {{noti.dealer_notification.name}}
				</p>
				<p *ngIf="noti.station_notification_config_id != 0"> 
				  {{noti.station_notification.name}}
				</p>
			  </ng-container>
			</p>
		</div>
    </div>
    <div class="uk-card-footer">
          <button class="uk-button uk-button-default uk-button-small uk-border-rounded" (click)="editCar(car.id)">{{'edit'|translate}}</button>
          <button class="uk-button uk-button-danger uk-button-small uk-border-rounded uk-margin-left" (click)="deregisterCar(car.id, car.license_plate, car.beacon.name)">{{'deregister'|translate}}</button>
		</div>
  </div> 
			-->
	<div class=" uk-margin">
	  <ul class="uk-pagination uk-flex-center" uk-margin>
		<li *ngIf="pageController.pageIndex != 1">
		  <a (click)="changePageonClick(false,-1)">
			<span uk-pagination-previous></span>
		  </a>
		</li>
		<li *ngIf="pageController.pageIndex > 4" class="uk-disabled">
		  <span>...</span>
		</li>
		<li *ngFor="let index of pageController.pageArray" [class.uk-active]="index==pageController.pageIndex">
		  <a (click)="changePageonClick(true,index)">{{index}}</a>
		</li>
		<!-- <li class="uk-active"><span>4</span></li> -->
		<li *ngIf="pageController.pageNumber - pageController.pageIndex > 3" class="uk-disabled">
		  <span>...</span>
		</li>
		<li *ngIf="pageController.pageIndex != pageController.pageNumber">
		  <a (click)="changePageonClick(false,1)">
			<span uk-pagination-next></span>
		  </a>
		</li>
	  </ul>
  </div>
</div>

<app-confirm-modal [elementId]="confirmModal.elementId" [detail]="confirmModal.detail" (onClick)="onClickConfirmModal($event)"></app-confirm-modal>

<div id="modal-deregister" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <h2 class="uk-modal-title">{{'deregister car'|translate}}: {{modalDeregister.title}}</h2>
    <form class="uk-form-stacked">
      <div class="uk-margin">
        <div class="uk-form-controls">
          <input class="uk-input" id="form-stacked-text" name="beacon-id" type="text" placeholder="{{'beacon'|translate}} {{'name'|translate}}" [(ngModel)]="modalDeregister.form.beaconId">
        </div>
      </div>
    </form>
    <p class="uk-text-right">
      <button class="uk-button uk-button-primary uk-border-rounded uk-margin-small-left" type="button" (click)="deregister()">{{'deregister'|translate}}</button>
      <button class="uk-button uk-button-default uk-border-rounded uk-margin-small-left" type="button" (click)="cancelDeregister()">{{'cancel'|translate}}</button>
    </p>
  </div>
</div>

<div class="loading" *ngIf="loading">
  <span class="uk-margin-small-right" uk-spinner="ratio: 3"></span>
</div>